{"ast":null,"code":"import axios from \"axios\";\naxios.defaults.baseURL = \"http://localhost:3001\";\nconst Token = localStorage.getItem(\"TOKEN\");\n\nconst Errorhandler = ({\n  data,\n  seterrmsg,\n  setwindow\n}) => {\n  if (data.error) {\n    seterrmsg(true);\n    setwindow(true);\n    return false;\n  } else {\n    return true;\n  }\n};\n\nexport const loginreq = async ({\n  setlogged,\n  setuserdata,\n  userdata,\n  router,\n  seterrmsg,\n  setbackenderror,\n  setactive\n}) => {\n  try {\n    const {\n      data\n    } = await axios.post(\"/login\", {\n      userdata: userdata\n    });\n    console.log(data);\n\n    if (data.wrong = \"WP\") {\n      setbackenderror(\"WP\");\n      setactive(true);\n    } else if (data.wrong = \"WE\") {\n      setbackenderror(\"WE\");\n      setactive(true);\n    } else {\n      setlogged(true);\n      setuserdata(data.Userdata);\n      localStorage.setItem(\"TOKEN\", data.token); //http cookie only ile store edicez\n\n      router.push(\"/\");\n    }\n  } catch (err) {\n    seterrmsg(true);\n  }\n};\nexport const resigterreq = async ({\n  setbackenderror,\n  userdata,\n  setactive,\n  seterrmsg\n}) => {\n  try {\n    const {\n      data\n    } = await axios.post(\"/register\", {\n      userdata: userdata\n    });\n\n    if (data.exist) {\n      setbackenderror(\"EXİST\");\n      setactive(true);\n    } else {//kayıt olmanız başarılı\n    }\n  } catch (err) {\n    seterrmsg(true);\n  }\n};\nexport const producereq = async ({\n  contentdata,\n  seterrmsg,\n  setwindow,\n  router\n}) => {\n  try {\n    const {\n      data\n    } = await axios.post(\"/content/produce\", {\n      contentdata: contentdata\n    });\n\n    if (Errorhandler({\n      data,\n      setwindow,\n      seterrmsg\n    })) {\n      setwindow(true);\n      router.push(\"/profile/content\"); //we route işlemi\n    } else {\n      return;\n    }\n  } catch (err) {\n    seterrmsg(true);\n    console.log(\"burada\");\n  }\n};\nexport const Homereq = async ({\n  currentdata,\n  seterrmsg,\n  setwindow,\n  setcontentdata,\n  order\n}) => {\n  try {\n    const {\n      data\n    } = await axios.get(`content/gethome/${order}`);\n    console.log(data.data);\n\n    if (Errorhandler({\n      data,\n      seterrmsg,\n      setwindow\n    })) {\n      const Current = [...currentdata];\n      const Mydata = [...data.data]; //push metodu bir diziyi bir dizinin içine pushluyor fakat concat elemanları\n\n      setcontentdata(Current.concat(Mydata));\n    } else {\n      return;\n    }\n  } catch (error) {\n    seterrmsg(true);\n  }\n};\nexport const Createrelationreq = async (UserId, PostId, attribute, seterrmsg, setwindow) => {\n  try {\n    const {\n      data\n    } = await axios.post(`content/createrelation`, {\n      UserId: UserId,\n      PostId: PostId,\n      attribute: attribute\n    });\n\n    if (Errorhandler({\n      data,\n      seterrmsg,\n      setwindow\n    })) {//...\n    } else {\n      return;\n    }\n  } catch (error) {\n    seterrmsg(true);\n  }\n};\nexport const Contentreq = async ({\n  contentId,\n  setcontent,\n  seterrmsg,\n  setwindow\n}) => {\n  try {\n    const {\n      data\n    } = await axios.get(`content/${contentId}`);\n\n    if (Errorhandler({\n      data,\n      seterrmsg,\n      setwindow\n    })) {\n      setcontent(data.data);\n      console.log(\"buradaaaaaaaa\");\n    } else {\n      return;\n    }\n  } catch (error) {\n    seterrmsg(true);\n  }\n};\nexport const Contextdata = async ({\n  setcontextdata,\n  seterrmsg,\n  setwindow\n}) => {\n  try {\n    const {\n      data\n    } = await axios.get(`user/getuserdata`, {\n      headers: {\n        'Authorization': `Basic ${Token}`\n      }\n    });\n\n    if (Errorhandler({\n      data,\n      seterrmsg,\n      setwindow\n    })) {\n      setcontextdata(data);\n      console.log(\"buradaaaaaaaa\");\n    } else {\n      return;\n    }\n  } catch (error) {}\n};","map":{"version":3,"sources":["C:/Users/bexsd/Desktop/nextproject/client/Api/Api.js"],"names":["axios","defaults","baseURL","Token","localStorage","getItem","Errorhandler","data","seterrmsg","setwindow","error","loginreq","setlogged","setuserdata","userdata","router","setbackenderror","setactive","post","console","log","wrong","Userdata","setItem","token","push","err","resigterreq","exist","producereq","contentdata","Homereq","currentdata","setcontentdata","order","get","Current","Mydata","concat","Createrelationreq","UserId","PostId","attribute","Contentreq","contentId","setcontent","Contextdata","setcontextdata","headers"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\n\r\naxios.defaults.baseURL=\"http://localhost:3001\";\r\nconst Token=localStorage.getItem(\"TOKEN\");\r\n\r\nconst Errorhandler=({data,seterrmsg,setwindow})=>{\r\n\r\n   if(data.error){\r\n      seterrmsg(true)\r\n      setwindow(true);\r\n      return false;\r\n   }\r\n   else{\r\n      return true;\r\n   }\r\n   \r\n}\r\n\r\nexport const loginreq=async({setlogged,setuserdata,userdata,router,seterrmsg,setbackenderror,setactive})=>{\r\n\r\n    try{\r\n\r\n      const{data}=await axios.post(\"/login\",{userdata:userdata})\r\n      console.log(data);\r\n      if(data.wrong=\"WP\"){\r\n\r\n        setbackenderror(\"WP\")\r\n        setactive(true);\r\n\r\n      }\r\n      else if(data.wrong=\"WE\"){\r\n\r\n        setbackenderror(\"WE\")\r\n        setactive(true);\r\n\r\n      }\r\n      else{\r\n        setlogged(true);\r\n        setuserdata(data.Userdata)\r\n        localStorage.setItem(\"TOKEN\",data.token);//http cookie only ile store edicez\r\n        router.push(\"/\");\r\n      }\r\n\r\n    }catch(err){\r\n        seterrmsg(true)\r\n    }\r\n    \r\n}\r\n\r\n\r\nexport const resigterreq=async({setbackenderror,userdata,setactive,seterrmsg})=>{\r\n    \r\n  try{\r\n    const{data}=await axios.post(\"/register\",{userdata:userdata})\r\n    \r\n    if(data.exist){\r\n        setbackenderror(\"EXİST\")\r\n        setactive(true)\r\n    }\r\n    else{\r\n        //kayıt olmanız başarılı\r\n    }\r\n  }catch(err){\r\n      seterrmsg(true)\r\n  }\r\n}\r\n\r\nexport const producereq=async({contentdata,seterrmsg,setwindow,router})=>{\r\n  try{\r\n    const{data}=await axios.post(\"/content/produce\",{contentdata:contentdata})\r\n    \r\n    if(Errorhandler({data,setwindow,seterrmsg})){\r\n        setwindow(true);\r\n        router.push(\"/profile/content\")\r\n        //we route işlemi\r\n    }\r\n    else{ \r\n       return;\r\n    }\r\n\r\n  }catch(err){\r\n      seterrmsg(true)\r\n      console.log(\"burada\")\r\n  }\r\n}\r\n\r\nexport const Homereq=async({currentdata,seterrmsg,setwindow,setcontentdata,order})=>{\r\n  try {\r\n\r\n    const{data}=await axios.get(`content/gethome/${order}`)\r\n    console.log(data.data);\r\n\r\n    if(Errorhandler({data,seterrmsg,setwindow})){\r\n\r\n      const Current=[...currentdata];\r\n      const Mydata=[...data.data];\r\n      //push metodu bir diziyi bir dizinin içine pushluyor fakat concat elemanları\r\n      setcontentdata(Current.concat(Mydata));\r\n    }    \r\n    else{\r\n      return;\r\n    }\r\n  \r\n  } catch (error) {\r\n       seterrmsg(true);\r\n  }\r\n}\r\n\r\n\r\nexport const Createrelationreq=async(UserId,PostId,attribute,seterrmsg,setwindow)=>{\r\n\r\n  try {\r\n\r\n    const{data}=await axios.post(`content/createrelation`,{\r\n      UserId:UserId,\r\n      PostId:PostId,\r\n      attribute:attribute\r\n    })\r\n\r\n    if(Errorhandler({data,seterrmsg,setwindow})){ \r\n        //...\r\n    }    \r\n    else{\r\n      return;\r\n    }\r\n  \r\n  } catch (error) {\r\n       seterrmsg(true);\r\n  }\r\n\r\n}\r\n\r\nexport const Contentreq=async({contentId,setcontent,seterrmsg,setwindow})=>{\r\n\r\n  try {\r\n\r\n    const{data}=await axios.get(`content/${contentId}`);\r\n    \r\n    if(Errorhandler({data,seterrmsg,setwindow})){ \r\n\r\n       setcontent(data.data)\r\n       console.log(\"buradaaaaaaaa\");\r\n\r\n    }    \r\n    else{\r\n      return;\r\n    }\r\n  \r\n  } catch (error) {\r\n       seterrmsg(true);\r\n  }\r\n\r\n}\r\n\r\nexport const Contextdata=async ({setcontextdata,seterrmsg,setwindow})=>{\r\n\r\n  try {\r\n\r\n    const {data}=await axios.get(`user/getuserdata`,{\r\n      headers:{\r\n        'Authorization':`Basic ${Token}`\r\n      }\r\n    });\r\n\r\n    if(Errorhandler({data,seterrmsg,setwindow})){ \r\n\r\n      setcontextdata(data)\r\n      console.log(\"buradaaaaaaaa\");\r\n\r\n   }   \r\n    \r\n   else{\r\n     return;\r\n   }\r\n \r\n\r\n  } catch (error) {\r\n    \r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}