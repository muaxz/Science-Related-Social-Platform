{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"C:/Users/bexsd/Desktop/nextproject/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"C:/Users/bexsd/Desktop/nextproject/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/bexsd/Desktop/nextproject/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\bexsd\\\\Desktop\\\\nextproject\\\\client\\\\components\\\\pages\\\\Profile\\\\Editwindow.js\",\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { CameraAlt } from '@material-ui/icons';\nimport React, { useState, useEffect } from 'react';\nimport styled from \"styled-components\";\nimport { Black, Porfileimage } from \"../../styledcomponents/button\";\nimport { TextField, Button } from \"@material-ui/core\";\nimport Cropper from \"react-image-crop\";\nimport axios from 'axios';\nimport \"react-image-crop/dist/ReactCrop.css\";\nvar Exterior = styled.div.withConfig({\n  displayName: \"Editwindow__Exterior\",\n  componentId: \"sc-9h7al1-0\"\n})([\"display:\", \";position:absolute;transform:translateX(-50%);left:50%;top:\", \";;max-width:600px;width:90%;height:\", \";background-color:white;border-radius:10px;z-index:1000;overflow:\", \";;\"], function (_ref) {\n  var active = _ref.active;\n  return active ? \"block\" : \"none\";\n}, function (_ref2) {\n  var getcropper = _ref2.getcropper;\n  return getcropper ? \"150px\" : \"70px\";\n}, function (_ref3) {\n  var getcropper = _ref3.getcropper;\n  return getcropper ? \"350px\" : \"580px\";\n}, function (_ref4) {\n  var getcropper = _ref4.getcropper;\n  return getcropper ? \"visible\" : \"auto\";\n});\n_c = Exterior;\nvar Inner = styled.div.withConfig({\n  displayName: \"Editwindow__Inner\",\n  componentId: \"sc-9h7al1-1\"\n})([\"position:relative;\"]);\n_c2 = Inner;\nvar Background = styled.div.withConfig({\n  displayName: \"Editwindow__Background\",\n  componentId: \"sc-9h7al1-2\"\n})([\"display:flex;cursor:pointer;justify-content:center;align-items:center;width:100%;border-top-left-radius:10px;border-top-right-radius:10px;height:200px;opacity:0.8;background-image:url(\", \");background-size:cover;background-repeat:no-repeat;background-position:center;transition:0.4s;&:hover{opacity:1;}\"], function (_ref5) {\n  var ImageforBack = _ref5.ImageforBack;\n  return ImageforBack;\n});\n_c3 = Background;\nvar ProfileImageholder = styled.div.withConfig({\n  displayName: \"Editwindow__ProfileImageholder\",\n  componentId: \"sc-9h7al1-3\"\n})([\"position:absolute;top:160px;opacity:0.8;left:30px;transition:0.4s;&:hover{opacity:1;}\"]);\n_c4 = ProfileImageholder;\nvar Inputholder = styled.div.withConfig({\n  displayName: \"Editwindow__Inputholder\",\n  componentId: \"sc-9h7al1-4\"\n})([\"margin-top:20px;\"]);\n_c5 = Inputholder;\nvar Information = styled.div.withConfig({\n  displayName: \"Editwindow__Information\",\n  componentId: \"sc-9h7al1-5\"\n})([\"padding-top:80px;padding-left:20px;padding-right:20px;padding-bottom:20px;\"]);\n_c6 = Information;\nvar Labelimage = styled.label.withConfig({\n  displayName: \"Editwindow__Labelimage\",\n  componentId: \"sc-9h7al1-6\"\n})([\"position:absolute;width:100%;height:200px;display:block;padding:6px;padding-left:45px;background-color:white;cursor:pointer;color:black;opacity:0;\"]);\n_c7 = Labelimage;\nexport default function Editwindow(_ref6) {\n  _s();\n\n  var _this = this;\n\n  var active = _ref6.active,\n      editdata = _ref6.editdata,\n      closefunc = _ref6.closefunc;\n\n  var _useState = useState(null),\n      file = _useState[0],\n      setfile = _useState[1];\n\n  var _useState2 = useState({\n    aspect: 16 / 16,\n    height: 200,\n    width: 100,\n    x: 50,\n    y: 50\n  }),\n      crop = _useState2[0],\n      setcrop = _useState2[1];\n\n  var _useState3 = useState(null),\n      src = _useState3[0],\n      setsrc = _useState3[1];\n\n  var _useState4 = useState(null),\n      image = _useState4[0],\n      setimage = _useState4[1];\n\n  var _useState5 = useState(null),\n      result = _useState5[0],\n      setresult = _useState5[1];\n\n  var _useState6 = useState(false),\n      iscropperactive = _useState6[0],\n      setcropperactive = _useState6[1];\n\n  var _useState7 = useState({\n    username: {\n      value: editdata.username,\n      label: \"Kullanici Adi\",\n      warning: false,\n      multiline: false\n    },\n    firstname: {\n      value: editdata.firstname,\n      label: \"Ad\",\n      warning: false,\n      multiline: false\n    },\n    surname: {\n      value: editdata.lastname,\n      label: \"Soyad\",\n      warning: false,\n      multiline: false\n    },\n    personaltext: {\n      value: editdata.Personaltext,\n      label: \"Kisisel Bilgiler\",\n      warning: false,\n      multiline: true\n    }\n  }),\n      userinfo = _useState7[0],\n      setuserinfo = _useState7[1];\n\n  useEffect(function () {\n    setcropperactive(false);\n  }, [active]);\n  useEffect(function () {\n    console.log(image);\n\n    if (image !== null) {\n      var canvas = document.createElement(\"canvas\");\n      var scaleX = image.naturalWidth / image.width;\n      var scaleY = image.naturalHeight / image.height;\n      canvas.width = crop.width;\n      canvas.height = crop.height;\n      var ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(image, crop.x * scaleX, crop.y * scaleY, crop.width * scaleX, crop.height * scaleY, 0, 0, crop.width, crop.height);\n      canvas.toBlob(function (blob) {\n        setresult(blob); //burada canvas uzerindeki resmi bloba cevirerek browserda sakliyor\n      });\n    }\n  }, [image]);\n\n  var Upload = /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var formData, _yield$axios$post, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              formData = new FormData();\n              formData.append(\"upload\", file);\n              _context.prev = 2;\n              console.log(crop.width);\n              console.log(crop.height); //move it to api file\n\n              _context.next = 7;\n              return axios.post(\"/upload/\".concat(crop.width, \"/\").concat(crop.height, \"/\").concat(crop.x, \"/\").concat(crop.y), formData);\n\n            case 7:\n              _yield$axios$post = _context.sent;\n              data = _yield$axios$post.data;\n              setimage(data.accesurl);\n              console.log(data);\n              _context.next = 16;\n              break;\n\n            case 13:\n              _context.prev = 13;\n              _context.t0 = _context[\"catch\"](2);\n              return _context.abrupt(\"return\", console.log(_context.t0));\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 13]]);\n    }));\n\n    return function Upload() {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n\n  var Inputhandler = function Inputhandler(key, event) {\n    var mutated = _objectSpread({}, userinfo);\n\n    mutated[key].value = event.target.value;\n    setuserinfo(mutated);\n  };\n\n  var Updatefile = function Updatefile(event, type) {\n    if (type == \"back\") {\n      setcrop({\n        aspect: 16 / 9,\n        height: 100,\n        width: 400,\n        unit: \"px\",\n        x: 0,\n        y: 50\n      });\n    } else {\n      setcrop({\n        aspect: 16 / 16,\n        height: 150,\n        width: 150,\n        unit: \"px\",\n        x: 50,\n        y: 50\n      });\n    }\n\n    setcropperactive(true);\n    setsrc(URL.createObjectURL(event.target.files[0]));\n    setfile(event.target.files[0]);\n  };\n\n  var updatecrop = function updatecrop(newcrop) {\n    if (crop.aspect > 1) {\n      setcrop(function (res) {\n        return _objectSpread(_objectSpread({}, res), {}, {\n          y: newcrop.y\n        });\n      });\n    } else {\n      setcrop(function (res) {\n        return _objectSpread(_objectSpread({}, res), {}, {\n          y: newcrop.y,\n          x: newcrop.x\n        });\n      });\n    } //value of cropper width height x and y\n\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Black, {\n      onClick: closefunc,\n      aktif: active\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      style: {\n        visibility: \"hidden\",\n        position: \"absolute\"\n      },\n      id: \"trial\",\n      src: src\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Exterior, {\n      getcropper: iscropperactive,\n      active: active,\n      children: /*#__PURE__*/_jsxDEV(Inner, {\n        children: iscropperactive ? /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: \"center\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(Cropper, {\n            onImageLoaded: setimage,\n            imageStyle: {\n              height: \"300px\",\n              width: \"400px\",\n              objectFit: \"cover\"\n            },\n            src: src,\n            crop: crop,\n            onChange: function onChange(newcrop) {\n              return updatecrop(newcrop);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: \"center\"\n            },\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              onClick: function onClick() {\n                return Upload();\n              },\n              color: \"secondary\",\n              variant: \"contained\",\n              children: \"Upload the file to server\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 34\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Background, {\n            ImageforBack: result == null ? \"/car.jpg\" : result,\n            children: [/*#__PURE__*/_jsxDEV(Labelimage, {\n              htmlFor: \"file\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(CameraAlt, {\n              style: {\n                color: \"white\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              onChange: function onChange(e) {\n                return Updatefile(e, \"back\");\n              },\n              name: \"upload\",\n              accept: \"image/png, image/gif, image/jpeg\",\n              id: \"file\",\n              type: \"file\",\n              style: {\n                display: \"none\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(ProfileImageholder, {\n            children: /*#__PURE__*/_jsxDEV(Porfileimage, {\n              style: {\n                display: \"flex\",\n                justifyContent: \"center\",\n                alignItems: \"center\"\n              },\n              width: \"80px\",\n              height: \"80px\",\n              profile: \"/way.jpg\",\n              children: [/*#__PURE__*/_jsxDEV(Labelimage, {\n                htmlFor: \"file2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(CameraAlt, {\n                style: {\n                  color: \"white\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                onChange: function onChange(e) {\n                  return Updatefile(e, \"profile\");\n                },\n                accept: \"image/png, image/gif, image/jpeg\",\n                id: \"file2\",\n                type: \"file\",\n                style: {\n                  display: \"none\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(Information, {\n            children: Object.keys(userinfo).map(function (item, index) {\n              return /*#__PURE__*/_jsxDEV(Inputholder, {\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  multiline: userinfo[item].multiline,\n                  rows: 4,\n                  onChange: function onChange(e) {\n                    return Inputhandler(item, e);\n                  },\n                  style: {\n                    width: \"100%\"\n                  },\n                  label: userinfo[item].label,\n                  variant: \"outlined\",\n                  value: userinfo[item].value\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 57\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 53\n              }, _this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 230,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Editwindow, \"wQs5BHuYQPo8v/mRDqca77xufbI=\");\n\n_c8 = Editwindow;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8;\n\n$RefreshReg$(_c, \"Exterior\");\n$RefreshReg$(_c2, \"Inner\");\n$RefreshReg$(_c3, \"Background\");\n$RefreshReg$(_c4, \"ProfileImageholder\");\n$RefreshReg$(_c5, \"Inputholder\");\n$RefreshReg$(_c6, \"Information\");\n$RefreshReg$(_c7, \"Labelimage\");\n$RefreshReg$(_c8, \"Editwindow\");","map":{"version":3,"sources":["C:/Users/bexsd/Desktop/nextproject/client/components/pages/Profile/Editwindow.js"],"names":["CameraAlt","React","useState","useEffect","styled","Black","Porfileimage","TextField","Button","Cropper","axios","Exterior","div","active","getcropper","Inner","Background","ImageforBack","ProfileImageholder","Inputholder","Information","Labelimage","label","Editwindow","editdata","closefunc","file","setfile","aspect","height","width","x","y","crop","setcrop","src","setsrc","image","setimage","result","setresult","iscropperactive","setcropperactive","username","value","warning","multiline","firstname","surname","lastname","personaltext","Personaltext","userinfo","setuserinfo","console","log","canvas","document","createElement","scaleX","naturalWidth","scaleY","naturalHeight","ctx","getContext","drawImage","toBlob","blob","Upload","formData","FormData","append","post","data","accesurl","Inputhandler","key","event","mutated","target","Updatefile","type","unit","URL","createObjectURL","files","updatecrop","newcrop","res","visibility","position","textAlign","objectFit","color","e","display","justifyContent","alignItems","Object","keys","map","item","index"],"mappings":"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","sourcesContent":["import { CameraAlt } from '@material-ui/icons'\r\nimport React, { useState,useEffect} from 'react'\r\nimport styled from \"styled-components\"\r\nimport {Black,Porfileimage} from \"../../styledcomponents/button\"\r\nimport {TextField,Button} from \"@material-ui/core\"\r\nimport Cropper from  \"react-image-crop\"\r\nimport axios from 'axios'\r\nimport \"react-image-crop/dist/ReactCrop.css\"\r\n\r\nconst Exterior = styled.div`\r\ndisplay:${({active})=>active ? \"block\" : \"none\"};\r\nposition:absolute;\r\ntransform:translateX(-50%);\r\nleft:50%;\r\ntop:${({getcropper})=>getcropper ? \"150px\" : \"70px\"};;\r\nmax-width:600px;\r\nwidth:90%;\r\nheight:${({getcropper})=>getcropper ? \"350px\" : \"580px\"};\r\nbackground-color:white;\r\nborder-radius:10px;\r\nz-index:1000;\r\noverflow:${({getcropper})=>getcropper ? \"visible\" : \"auto\"};;\r\n`\r\nconst Inner = styled.div`\r\nposition:relative;\r\n\r\n`\r\n\r\nconst Background = styled.div`\r\ndisplay:flex;\r\ncursor:pointer;\r\njustify-content:center;\r\nalign-items:center;\r\nwidth:100%;\r\nborder-top-left-radius:10px;\r\nborder-top-right-radius:10px;\r\nheight:200px;\r\nopacity:0.8;\r\nbackground-image:url(${({ImageforBack})=>ImageforBack});\r\nbackground-size: cover;\r\nbackground-repeat: no-repeat;\r\nbackground-position: center; \r\ntransition:0.4s;\r\n&:hover{\r\n    opacity:1;\r\n}\r\n`\r\n\r\nconst ProfileImageholder=styled.div`\r\nposition:absolute;\r\ntop:160px;\r\nopacity:0.8;\r\nleft:30px;\r\ntransition:0.4s;\r\n&:hover{\r\n    opacity:1;\r\n}\r\n`\r\nconst Inputholder = styled.div`\r\nmargin-top:20px;\r\n`\r\nconst Information = styled.div`\r\npadding-top:80px;\r\npadding-left:20px;\r\npadding-right:20px; \r\npadding-bottom:20px;\r\n`\r\n\r\nconst Labelimage=styled.label`\r\nposition:absolute;\r\nwidth:100%;\r\nheight:200px;\r\ndisplay:block;\r\npadding:6px;\r\npadding-left:45px;\r\nbackground-color:white;\r\ncursor:pointer;\r\ncolor:black;\r\nopacity:0;\r\n`\r\n\r\nexport default function Editwindow({active,editdata,closefunc}){\r\n\r\n\r\n    const [file,setfile] = useState(null)\r\n    const [crop,setcrop] = useState({aspect:16/16,height:200,width:100,x:50,y:50})\r\n    const [src,setsrc] = useState(null)\r\n    const [image,setimage] = useState(null)\r\n    const [result,setresult] = useState(null)\r\n    const [iscropperactive,setcropperactive] = useState(false)\r\n    const [userinfo,setuserinfo] = useState({\r\n        username:{\r\n            value:editdata.username,\r\n            label:\"Kullanici Adi\",\r\n            warning:false,\r\n            multiline:false\r\n        },\r\n        firstname:{\r\n            value:editdata.firstname,\r\n            label:\"Ad\",\r\n            warning:false,\r\n            multiline:false\r\n        },\r\n        surname:{\r\n            value:editdata.lastname,\r\n            label:\"Soyad\",\r\n            warning:false,\r\n            multiline:false\r\n        },\r\n        personaltext:{\r\n            value:editdata.Personaltext,\r\n            label:\"Kisisel Bilgiler\",\r\n            warning:false,\r\n            multiline:true\r\n        },\r\n    })\r\n    \r\n    useEffect(()=>{\r\n        setcropperactive(false)\r\n    },[active])\r\n\r\n    useEffect(()=>{\r\n        console.log(image)\r\n        if(image !== null){\r\n\r\n            const canvas = document.createElement(\"canvas\");\r\n            const scaleX = image.naturalWidth / image.width;\r\n            const scaleY = image.naturalHeight / image.height;\r\n            canvas.width = crop.width;\r\n            canvas.height = crop.height;\r\n            const ctx = canvas.getContext(\"2d\");\r\n        \r\n            ctx.drawImage(\r\n            image,\r\n            crop.x * scaleX,\r\n            crop.y * scaleY,\r\n            crop.width * scaleX,\r\n            crop.height * scaleY,\r\n            0,\r\n            0,\r\n            crop.width,\r\n            crop.height\r\n            );\r\n\r\n            canvas.toBlob((blob)=>{\r\n                setresult(blob)//burada canvas uzerindeki resmi bloba cevirerek browserda sakliyor\r\n            })\r\n\r\n        }   \r\n\r\n    },[image])\r\n\r\n    const Upload = async ()=>{\r\n\r\n        const formData=new FormData();\r\n\r\n        formData.append(\"upload\",file);\r\n\r\n        try{\r\n\r\n            console.log(crop.width)\r\n            console.log(crop.height)\r\n            //move it to api file\r\n            const {data} = await axios.post(`/upload/${crop.width}/${crop.height}/${crop.x}/${crop.y}`,formData)\r\n            setimage(data.accesurl)\r\n            console.log(data)\r\n            \r\n         }catch(err){ \r\n   \r\n            return console.log(err);\r\n            \r\n         }\r\n\r\n        \r\n    }\r\n\r\n    const Inputhandler = (key,event)=>{\r\n\r\n        const mutated = {...userinfo}\r\n        mutated[key].value=event.target.value\r\n        setuserinfo(mutated)\r\n    }\r\n\r\n    const Updatefile = (event,type)=>{\r\n\r\n        if(type == \"back\"){\r\n            setcrop({\r\n                aspect:16/9,\r\n                height:100,\r\n                width:400,\r\n                unit:\"px\",\r\n                x:0,\r\n                y:50\r\n            })\r\n        }\r\n        else{\r\n            setcrop({\r\n                aspect:16/16,\r\n                height:150,\r\n                width:150,\r\n                unit:\"px\",\r\n                x:50,\r\n                y:50\r\n            })\r\n        }\r\n        \r\n        setcropperactive(true)\r\n        setsrc(URL.createObjectURL(event.target.files[0]))\r\n        setfile(event.target.files[0])\r\n       \r\n    }\r\n\r\n    const updatecrop = (newcrop)=>{\r\n\r\n        if(crop.aspect > 1){\r\n            setcrop((res)=>{\r\n                return {...res,y:newcrop.y}\r\n            })\r\n        }\r\n        else{\r\n            setcrop((res)=>{\r\n                return {...res,y:newcrop.y,x:newcrop.x}\r\n            })\r\n        }\r\n\r\n        //value of cropper width height x and y\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Black onClick={closefunc} aktif={active}/>\r\n            <img style={{visibility:\"hidden\",position:\"absolute\"}} id=\"trial\" src={src}></img>\r\n            <Exterior getcropper={iscropperactive} active={active}>\r\n                <Inner>\r\n                    {\r\n                        iscropperactive \r\n                        \r\n                        ? \r\n                            <div style={{textAlign:\"center\"}}>\r\n                                <Cropper  onImageLoaded={setimage} imageStyle={{height:\"300px\",width:\"400px\",objectFit:\"cover\"}}  src={src} crop={crop} onChange={(newcrop)=>updatecrop(newcrop)}/> \r\n                                <div style={{textAlign:\"center\"}}>\r\n                                 <Button onClick={()=>Upload()} color=\"secondary\" variant=\"contained\" >Upload the file to server</Button>\r\n                                </div>\r\n                            </div>\r\n                        \r\n                        :\r\n\r\n                             (<> \r\n                                <Background ImageforBack={result == null ? \"/car.jpg\" : result}>\r\n                                    <Labelimage  htmlFor=\"file\"></Labelimage>\r\n                                    <CameraAlt style={{color:\"white\"}}></CameraAlt>\r\n                                    <input onChange={(e)=>Updatefile(e,\"back\")} name=\"upload\" accept=\"image/png, image/gif, image/jpeg\" id=\"file\" type=\"file\" style={{display:\"none\"}}></input>\r\n                                </Background>\r\n                                <ProfileImageholder>\r\n                                    <Porfileimage style={{display:\"flex\",justifyContent:\"center\",alignItems:\"center\"}} width=\"80px\" height=\"80px\" profile={\"/way.jpg\"}>\r\n                                        <Labelimage htmlFor=\"file2\"></Labelimage>\r\n                                        <CameraAlt style={{color:\"white\"}}></CameraAlt>\r\n                                        <input onChange={(e)=>Updatefile(e,\"profile\")} accept=\"image/png, image/gif, image/jpeg\" id=\"file2\" type=\"file\" style={{display:\"none\"}}></input>\r\n                                    </Porfileimage>\r\n                                </ProfileImageholder>\r\n                                <Information>\r\n                                    {\r\n                                        Object.keys(userinfo).map((item,index)=>{\r\n\r\n                                            return (<Inputholder>\r\n                                                        <TextField\r\n                                                        multiline={userinfo[item].multiline}\r\n                                                        rows={4}\r\n                                                        onChange={(e)=>Inputhandler(item,e)}\r\n                                                        style={{width:\"100%\"}}\r\n                                                        label={userinfo[item].label}\r\n                                                        variant=\"outlined\"\r\n                                                        value={userinfo[item].value}\r\n                                                        ></TextField>\r\n                                                </Inputholder>)\r\n                                        })\r\n                                    }\r\n                                </Information>\r\n                        </>)\r\n                    }\r\n                       \r\n        \r\n                </Inner>\r\n            </Exterior>\r\n        </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}